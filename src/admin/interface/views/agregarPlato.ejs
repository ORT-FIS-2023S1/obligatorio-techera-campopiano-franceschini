<!-- Contenido de agregarPlato -->
<!-- Aquí puedes incluir el contenido específico de agregarPlato -->
<!-- Por ejemplo, puedes incluir el formulario -->
<div class="container">
  <h1>Agregar Plato al Menú</h1>
  <form id="plato-form" action="/admin/index/agregarPlato" method="POST">
    <div class="form-group">
      <label for="nombre">Nombre del Plato:</label>
      <input
        type="text"
        id="nombre"
        name="nombre"
        class="form-control"
        required
      />
    </div>
    <div class="form-group">
      <label for="precio">Precio del Plato:</label>
      <input
        type="text"
        id="precio"
        name="precio"
        class="form-control"
        required
      />
    </div>
    <div class="form-group">
      <label for="ingredientes">Ingredientes principales:</label>
      <input
        type="text"
        id="ingredientes"
        name="ingredientes"
        class="form-control"
        required
      />
    </div>
    <div class="form-group">
      <label for="porcion">Tamaño de la porción:</label>
      <input
        type="text"
        id="porcion"
        name="porcion"
        class="form-control"
        required
      />
    </div>
    <div class="form-group">
      <label for="nutricional">Información Nutricional:</label>
      <textarea
        id="nutricional"
        name="nutricional"
        class="form-control"
        rows="10"
        required
      ></textarea>
    </div>
    <div class="button-container">
      <button type="submit" class="btn btn-primary">Agregar Plato</button>
      <button type="button" class="btn btn-secondary cancel">Cancelar</button>
    </div>
  </form>
</div>
<script>
  // Obtener el formulario y los campos
  const form = document.getElementById("plato-form");

  // Manejar el evento de envío del formulario
  form.addEventListener("submit", function (event) {
    event.preventDefault(); // Evitar que el formulario se envíe

    // Obtener los valores de los campos
    //const formData = new FormData(form);

    // Realizar una solicitud AJAX al servidor para guardar los datos del formulario
    fetch(form.action, {
      method: form.method,
      headers: {
        "Content-Type": "application/x-www-form-urlencoded",
      },
      body: new URLSearchParams(new FormData(form)),
    })
      .then((response) => {
        if (response.ok) {
          // Se guardaron los datos exitosamente
          Swal.fire({
            icon: "success",
            title: "Plato agregado",
            text: "El plato ha sido agregado correctamente al menú",
            showCancelButton: true,
            confirmButtonText: "Agregar otro plato",
            cancelButtonText: "Ir al inicio",
          }).then((result) => {
            if (result.isConfirmed) {
              // El usuario quiere agregar otro plato
              // Limpiar los campos del formulario
              form.reset();
              location.reload();
            } else {
              // El usuario quiere ir al inicio
              // Redirigir al usuario a la página de inicio
              window.location.href = "/admin/index"; // Reemplaza '/inicio' con la ruta de la página de inicio en tu aplicación
            }
          });
        } else {
          throw new Error("Error al guardar los datos del formulario");
        }
      })
      .catch((error) => {
        console.error(error);
        // Manejar el error de alguna manera, por ejemplo, mostrar un mensaje de error con Swal
        Swal.fire({
          icon: "error",
          title: "Error",
          text: "Ocurrió un error al guardar los datos del formulario.",
        });
      });
  });
</script>
